(function(p,n){function A(d,a,b,e,g){function m(){G=1<p.devicePixelRatio;h(b);0<=a.delay&&setTimeout(function(){B(!0)},a.delay);if(0>a.delay||a.combined)e.e=F(a.throttle,function(a){"resize"===a.type&&(x=y=-1);B(a.all)}),e.a=function(a){h(a);b.push.apply(b,a)},e.g=function(){return b=f(b).filter(function(){return!f(this).data(a.loadedName)})},B(),f(a.appendScroll).on("scroll."+g+" resize."+g,e.e)}function h(c){var b=a.defaultImage,e=a.placeholder,r=a.imageBase,t=a.srcsetAttribute,g=a.loaderAttribute,
h=a._f||{};c=f(c).filter(function(){var c=f(this),b=this.tagName.toLowerCase();return!c.data(a.handledName)&&(c.attr(a.attribute)||c.attr(t)||c.attr(g)||h[b]!=n)}).data("plugin_"+a.name,d);for(var z=0,l=c.length;z<l;z++){var k=f(c[z]),v=c[z].tagName.toLowerCase(),m=k.attr(a.imageBaseAttribute)||r;"img"==v&&m&&k.attr(t)&&k.attr(t,A(k.attr(t),m));h[v]==n||k.attr(g)||k.attr(g,h[v]);"img"==v&&b&&!k.attr("src")?k.attr("src",b):"img"==v||!e||k.css("background-image")&&"none"!=k.css("background-image")||
k.css("background-image","url('"+e+"')")}}function B(c){if(b.length){for(var e=!1,g=a.imageBase||"",r=a.srcsetAttribute,t=a.handledName,h=0,m=b.length;h<m;h++)(function(b){var l;if(!(l=c)){var k=b.getBoundingClientRect();l=a.scrollDirection;var h=a.threshold,d=(0<=y?y:y=p.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+h>k.top&&-h<k.bottom;k=(0<=x?x:x=p.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+h>k.left&&-h<k.right;l="vertical"==l?
d:"horizontal"==l?k:d&&k}l&&(l=f(b),b=b.tagName.toLowerCase(),d=l.attr(a.attribute),k=l.attr(a.imageBaseAttribute)||g,h=l.attr(a.loaderAttribute),l.data(t)||a.visibleOnly&&!l.is(":visible")||!((d||l.attr(r))&&("img"==b&&(k+d!=l.attr("src")||l.attr(r)!=l.attr("srcset"))||"img"!=b&&k+d!=l.css("background-image"))||h)||(e=!0,l.data(t,!0),w(l,b,k,h)))})(b[h]);e&&(b=f(b).filter(function(){return!f(this).data(t)}))}else a.autoDestroy&&d.destroy()}function w(c,b,h,d){++D;var e=function(){u("onError",c);
E();e=f.noop};u("beforeLoad",c);var g=a.attribute,m=a.srcsetAttribute,r=a.sizesAttribute,l=a.retinaAttribute,k=a.removeAttribute,n=a.loadedName,p=c.attr(l);if(d){var C=function(){k&&c.removeAttr(a.loaderAttribute);c.data(n,!0);u("afterLoad",c);setTimeout(E,1);C=f.noop};c.off("error").one("error",e).one("load",C);u(d,c,function(a){a?(c.off("load"),C()):(c.off("error"),e())})||c.trigger("error")}else{var q=f(new Image);q.one("error",e).one("load",function(){c.hide();"img"==b?c.attr("sizes",q.attr("sizes")).attr("srcset",
q.attr("srcset")).attr("src",q.attr("src")):c.css("background-image","url('"+q.attr("src")+"')");c[a.effect](a.effectTime);k&&(c.removeAttr(g+" "+m+" "+l+" "+a.imageBaseAttribute),"sizes"!==r&&c.removeAttr(r));c.data(n,!0);u("afterLoad",c);q.remove();E()});d=(G&&p?p:c.attr(g))||"";q.attr("sizes",c.attr(r)).attr("srcset",c.attr(m)).attr("src",d?h+d:null);q.complete&&q.load()}}function A(a,b){if(b){var c=a.split(",");a="";for(var d=0,h=c.length;d<h;d++)a+=b+c[d].trim()+(d!==h-1?",":"")}return a}function F(b,
h){var c,e=0;return function(f,g){function m(){e=+new Date;h.call(d,f)}var n=+new Date-e;c&&clearTimeout(c);n>b||!a.enableThrottle||g?m():c=setTimeout(m,b-n)}}function E(){--D;b.length||D||u("onFinishedAll")}function u(b,h,e){return(b=a[b])?(b.apply(d,[].slice.call(arguments,1)),!0):!1}var D=0,x=-1,y=-1,G=!1;if("event"==a.bind)m();else f(p).on("load."+g,m)}function w(d,a){var b=this,e=f.extend({},b.config,a),g={},m=e.name+"-"+ ++F;b.config=function(a,d){if(d===n)return e[a];e[a]=d;return b};b.addItems=
function(a){g.a&&g.a("string"===f.type(a)?f(a):a);return b};b.getItems=function(){return g.g?g.g():{}};b.update=function(a){g.e&&g.e({},!a);return b};b.loadAll=function(){g.e&&g.e({all:!0},!0);return b};b.destroy=function(){f(e.appendScroll).off("."+m,g.e);f(p).off("."+m);g={};return n};A(b,e,d,g,m);return e.chainable?d:b}var f=p.jQuery||p.Zepto,F=0;f.fn.Lazy=f.fn.lazy=function(d){return new w(this,d)};f.Lazy=f.lazy=function(d,a,b){f.isFunction(a)&&(b=a,a=[]);if(f.isFunction(b)){d=f.isArray(d)?d:
[d];a=f.isArray(a)?a:[a];for(var e=w.prototype.config,g=e._f||(e._f={}),m=0,h=d.length;m<h;m++)if(e[d[m]]===n||f.isFunction(e[d[m]]))e[d[m]]=b;b=0;for(e=a.length;b<e;b++)g[a[b]]=d[0]}};w.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:p,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d",placeholder:null,delay:-1,combined:!1,attribute:"data-src",
srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:n,afterLoad:n,onError:n,onFinishedAll:n}})(window);